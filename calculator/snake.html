<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator fun!</title>
    <link rel="icon" type="image/x-icon" href="../Assets/favicon-32x32.png">
    <link href="./styles.css" rel="stylesheet">
</head>
<body>
  <p>play snake<br>If you leave the black bordered area or run into yourself, you lose.</p>
    <button onclick="start()">start</button>
    <canvas id="canvas" width="500" height="300"></canvas>
</body>
</html>

<script>
var beep = new Audio('../Assets/snakebeep.mp3');
function start() {
    setInterval(draw, 100);
    setInterval(keystrokes, 1);
    setInterval(hitbox, 5000);
    beep.play();
    apple();
}
var applex = 0;
var appley = 0;
var n = 0;
var velox = 0;
var veloy = 20;
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
ctx.fillStyle = "green";
var xpos = [30,10,-10,-30,-50,-70];
var ypos = [10,10,10,10,10,10];
var xposm = [];
var yposm = [];

function apple() {
    applex = Math.floor(Math.random() * 468) + 1;
    appley = Math.floor(Math.random() * 268) + 1;

    while((applex-10) % 20 != 0) {
        applex++
    }
    while((appley-10) % 20 != 0) {
        appley++;
    }
    xpos.push(xpos[xpos.length]-velox);
    ypos.push(ypos[ypos.length]-veloy);
}
    
function hitbox() {
    n = 1;
}
    
function draw() {
    ctx.clearRect(0, 0, c.width, c.height);

    xposm.length = xpos.length;
    yposm.length = ypos.length;
    
    for(var i = 0;i<xpos.length;i++) {
        xposm[i] = xpos[i];
        yposm[i] = ypos[i];
    }
    xpos[0] += velox;
    ypos[0] += veloy;
    if(xpos.length>1) {
    ctx.fillStyle = "green";
    for(var i = 1;i<xpos.length;i++) {
    xpos[i] = xposm[i-1];
    ypos[i] = yposm[i-1];
    }

    for(var i = 0;i<xpos.length;i++) {
        ctx.fillRect(xpos[i],ypos[i],18,18);
    }

    if(xpos[0] == applex && ypos[0] == appley) {
        apple();
    }
    
    if(n==1) {

    if(xpos[0]<0 || xpos[0]>500 || ypos[0]<0 || ypos[0]>300) {
        window.location.href = "http://club-website.pages.dev/calculator/snake.html";
    }
    
    for(var i = 1;i<xpos.length;i++) {
        if(xpos[0] == xpos[i] && ypos[0] == ypos[i]) {
            window.location.href = "http://club-website.pages.dev/calculator/snake.html";
        }
    }
    }
}
    ctx.fillStyle = "red";
    ctx.fillRect(applex,appley,18,18);
}

function keystrokes() {
    document.onkeydown = function(e) { 
        switch (e.keyCode) { 
            case 37: 
                velox = -20;
                veloy = 0;
                break; 
            case 38: 
                velox = 0;
                veloy = -20;
                break; 
            case 39: 
                velox = 20;
                veloy = 0;
                break; 
            case 40: 
                velox = 0;
                veloy = 20;
                break; 
        } 
    };
}
</script>
