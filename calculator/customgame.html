<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play customgame</title>
    <link rel="icon" type="image/x-icon" href="../Assets/favicon-32x32.png">
    <link href="./styles.css" rel="stylesheet">


</head>
<body>
    <p>runs at 30fps!<br>running proper collision code since 28 February 2024</p>
    <button onclick="start()">Start</button>
    <nav id="snakenav">
    <canvas id="canvas" width="500" height="300"></canvas>
        <a href="../index.html" alt="Home">
            <img src="../Assets/ClubLogo.png" id="homepage">
        </a>
        <a href="./main.html" alt="Calculator">
            <img src="../Assets/calculator.jpg" id="calculatorpage">
        </a>
    </nav>
</body>
</html>
<script>
    c = document.getElementById('canvas');
    ctx = c.getContext('2d');

    var colliders = [];

    createBox(30,30,50,50);
    
    var movement;
    var drawing;

    var col = {
        xmax: 470,
        xmin: 10,
        ymax: 270,
        ymin: 10,
        
    };

    function start() {
        movement = setInterval(playerMovement,1);
        drawing = setInterval(draw,50);
    }
    
    var player = {
        x: 10,
        y: 10,
        px: 0,
        py: 0,
        w: 20,
        h: 20,
        speed: 20,
    };

    function playerMovement() {
        document.onkeydown = function(e) {
            player.px = player.x;
            player.py = player.y;
            switch(e.keyCode) {
                case 37: 
                    player.x -= player.speed;
                    break; 
                case 38: 
                    player.y -= player.speed;
                    break; 
                case 39: 
                    player.x += player.speed;
                    break; 
                case 40: 
                    player.y += player.speed;
                    break;
                default:
                    break;
            }
        };
        if(player.x < col.xmin) {
            player.x = col.xmin;
        }
        if(player.x > col.xmax) {
            player.x = col.xmax;
        }
        if(player.y < col.ymin) {
            player.y = col.ymin;
        }
        if(player.y > col.ymax) {
            player.y = col.ymax;
        }

        for(var i = 0; i<colliders.length; i+=4) {
            if(player.x>=colliders[i] && player.x<=colliders[i]+colliders[i+2] && player.y>=colliders[i+1] && player.y<=colliders[i+1]+colliders[i+3]) {
                player.x = player.px;
                player.y = player.py;
            }
        }
    }
    
    function draw() {
        ctx.clearRect(0,0,500,300);

        ctx.fillStyle = "white";
        ctx.fillRect(player.x,player.y,player.w,player.h);
        for(var i = 0; i<colliders.length; i+=4) {
            ctx.fillRect(colliders[i],colliders[i+1],colliders[i+2],colliders[i+3]);
        }
    }

    function createBox(x,y,w,h) {
        while( (x - 10) % 20 != 0 ) {
            x++;
        }

       while( (y - 10) % 20 != 0 ) {
            y++;
        }
        
        while( (w - 10) % 20 != 0 ) {
            w++;
        }

        while( (h - 10) % 20 != 0 ) {
            h++;
        }
        
        colliders.push(x);
        colliders.push(y);
        colliders.push(w);
        colliders.push(h);
    }
</script>
